<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OpenCC WASM - å¼€ç®±å³ç”¨æ¼”ç¤º</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.6;
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #007bff;
      padding-bottom: 10px;
    }
    .demo-section {
      background: #f8f9fa;
      border-left: 4px solid #007bff;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }
    .code-block {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      margin: 10px 0;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
    }
    .highlight {
      background: #28a745;
      color: white;
      padding: 2px 8px;
      border-radius: 3px;
      font-weight: bold;
    }
    textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
      font-family: inherit;
      min-height: 80px;
      border: 2px solid #ddd;
      border-radius: 4px;
      resize: vertical;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      cursor: pointer;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      margin: 10px 5px 10px 0;
      transition: background 0.3s;
    }
    button:hover:not(:disabled) {
      background: #0056b3;
    }
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .output {
      margin-top: 10px;
      padding: 15px;
      background: white;
      border: 2px solid #28a745;
      border-radius: 4px;
      min-height: 60px;
      white-space: pre-wrap;
      font-size: 16px;
    }
    .status {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-weight: bold;
    }
    .status.loading {
      background: #fff3cd;
      color: #856404;
    }
    .status.success {
      background: #d4edda;
      color: #155724;
    }
    .status.error {
      background: #f8d7da;
      color: #721c24;
    }
    .converter-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .info-box {
      background: #e7f3ff;
      border-left: 4px solid #2196F3;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <h1>ğŸš€ OpenCC WASM - å¼€ç®±å³ç”¨æ¼”ç¤º</h1>

  <div class="info-box">
    <h3>âœ¨ ç‰¹ç‚¹ï¼šæ— éœ€ä»»ä½•é…ç½®ï¼</h3>
    <p>è¿™ä¸ªé¡µé¢ä» CDN åŠ è½½ opencc-wasmï¼Œ<span class="highlight">è‡ªåŠ¨ä¸‹è½½</span>æ‰€æœ‰éœ€è¦çš„é…ç½®å’Œå­—å…¸æ–‡ä»¶ã€‚</p>
    <p>æ‚¨åªéœ€è¦ 3 è¡Œä»£ç å°±èƒ½å®Œæˆä¸­æ–‡è½¬æ¢ï¼</p>
  </div>

  <div class="demo-section">
    <h2>ğŸ“ ç¤ºä¾‹ä»£ç ï¼ˆä»…éœ€ 3 è¡Œï¼ï¼‰</h2>
    <div class="code-block">
// 1. ä»æœ¬åœ° dist å¯¼å…¥ï¼ˆæ¨¡æ‹Ÿ CDNï¼‰
import OpenCC from '../dist/esm/index.js';

// 2. åˆ›å»ºè½¬æ¢å™¨ï¼ˆè‡ªåŠ¨åŠ è½½é…ç½®å’Œå­—å…¸ï¼ï¼‰
const converter = OpenCC.Converter({ from: "cn", to: "tw" });

// 3. è½¬æ¢æ–‡æœ¬
const result = await converter("ç®€ä½“ä¸­æ–‡");
    </div>
    <p><strong>å°±æ˜¯è¿™æ ·ï¼</strong>æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼ˆ.jsonï¼‰å’Œå­—å…¸æ–‡ä»¶ï¼ˆ.ocd2ï¼‰éƒ½ä¼šä» CDN è‡ªåŠ¨ä¸‹è½½ã€‚</p>
  </div>

  <div class="status" id="status">å‡†å¤‡å°±ç»ª</div>

  <div class="demo-section">
    <h2>ğŸ§ª å®æ—¶æ¼”ç¤º</h2>

    <label>
      <strong>è¾“å…¥æ–‡æœ¬ï¼š</strong>
      <textarea id="input" placeholder="è¯·è¾“å…¥ç®€ä½“ä¸­æ–‡æ–‡æœ¬...">å¼€æºä¸­æ–‡è½¬æ¢å·¥å…·å¯ä»¥å°†ç®€ä½“ä¸­æ–‡è½¬æ¢ä¸ºç¹ä½“ä¸­æ–‡ï¼ˆå°æ¹¾ã€é¦™æ¸¯ï¼‰ã€‚é¼ æ ‡é‡Œé¢çš„ç¡…äºŒæç®¡åäº†ï¼Œå¯¼è‡´å…‰æ ‡åˆ†è¾¨ç‡é™ä½ã€‚</textarea>
    </label>

    <div class="converter-group">
      <button id="btnSimp2Trad">ç®€ä½“ â†’ ç¹ä½“ (s2t)</button>
      <button id="btnSimp2TW">ç®€ä½“ â†’ å°æ¹¾ (s2tw)</button>
      <button id="btnSimp2HK">ç®€ä½“ â†’ é¦™æ¸¯ (s2hk)</button>
      <button id="btnSimp2TWP">ç®€ä½“ â†’ å°æ¹¾ï¼ˆæƒ¯ç”¨è¯ï¼‰(s2twp)</button>
    </div>

    <div class="converter-group">
      <button id="btnTrad2Simp">ç¹ä½“ â†’ ç®€ä½“ (t2s)</button>
      <button id="btnTW2Simp">å°æ¹¾ â†’ ç®€ä½“ (tw2s)</button>
      <button id="btnHK2Simp">é¦™æ¸¯ â†’ ç®€ä½“ (hk2s)</button>
    </div>

    <strong>è¾“å‡ºç»“æœï¼š</strong>
    <div class="output" id="output">ï¼ˆç‚¹å‡»ä¸Šæ–¹æŒ‰é’®è¿›è¡Œè½¬æ¢ï¼‰</div>
  </div>

  <div class="info-box">
    <h3>ğŸ“¦ è‡ªåŠ¨åŠ è½½çš„èµ„æº</h3>
    <p>å½“æ‚¨ç‚¹å‡»è½¬æ¢æŒ‰é’®æ—¶ï¼Œä¼šçœ‹åˆ°ä»¥ä¸‹è¿‡ç¨‹ï¼ˆé¦–æ¬¡ä½¿ç”¨æ—¶ï¼‰ï¼š</p>
    <ul>
      <li>âœ… åŠ è½½ WASM æ¨¡å—ï¼ˆopencc-wasm.wasmï¼‰</li>
      <li>âœ… ä» CDN ä¸‹è½½é…ç½®æ–‡ä»¶ï¼ˆå¦‚ s2tw.jsonï¼‰</li>
      <li>âœ… ä» CDN ä¸‹è½½æ‰€éœ€å­—å…¸ï¼ˆå¦‚ STPhrases.ocd2ã€TWPhrases.ocd2 ç­‰ï¼‰</li>
      <li>âœ… ç¼“å­˜é…ç½®å’Œå­—å…¸ï¼ˆåç»­è½¬æ¢æ— éœ€é‡æ–°ä¸‹è½½ï¼‰</li>
    </ul>
    <p><strong>æ‰€æœ‰è¿™äº›éƒ½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼</strong>æ‚¨ä¸éœ€è¦å†™ä»»ä½•åŠ è½½ä»£ç ã€‚</p>
  </div>

  <div class="demo-section">
    <h2>ğŸ” æ”¯æŒçš„è½¬æ¢ç±»å‹</h2>
    <table style="width: 100%; border-collapse: collapse;">
      <tr style="background: #f0f0f0; font-weight: bold;">
        <td style="padding: 8px; border: 1px solid #ddd;">From</td>
        <td style="padding: 8px; border: 1px solid #ddd;">To</td>
        <td style="padding: 8px; border: 1px solid #ddd;">ä»£ç </td>
      </tr>
      <tr>
        <td style="padding: 8px; border: 1px solid #ddd;">ç®€ä½“ (cn)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">ç¹ä½“ (t)</td>
        <td style="padding: 8px; border: 1px solid #ddd;"><code>{ from: "cn", to: "t" }</code></td>
      </tr>
      <tr>
        <td style="padding: 8px; border: 1px solid #ddd;">ç®€ä½“ (cn)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">å°æ¹¾ç¹ä½“ (tw)</td>
        <td style="padding: 8px; border: 1px solid #ddd;"><code>{ from: "cn", to: "tw" }</code></td>
      </tr>
      <tr>
        <td style="padding: 8px; border: 1px solid #ddd;">ç®€ä½“ (cn)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">é¦™æ¸¯ç¹ä½“ (hk)</td>
        <td style="padding: 8px; border: 1px solid #ddd;"><code>{ from: "cn", to: "hk" }</code></td>
      </tr>
      <tr>
        <td style="padding: 8px; border: 1px solid #ddd;">ç¹ä½“ (t)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">ç®€ä½“ (cn)</td>
        <td style="padding: 8px; border: 1px solid #ddd;"><code>{ from: "t", to: "cn" }</code></td>
      </tr>
      <tr>
        <td style="padding: 8px; border: 1px solid #ddd;">å°æ¹¾ (tw)</td>
        <td style="padding: 8px; border: 1px solid #ddd;">ç®€ä½“ (cn)</td>
        <td style="padding: 8px; border: 1px solid #ddd;"><code>{ from: "tw", to: "cn" }</code></td>
      </tr>
    </table>
  </div>

  <script type="module">
    const status = document.getElementById('status');
    const input = document.getElementById('input');
    const output = document.getElementById('output');

    let converters = {};
    let isLoading = false;

    // æ˜¾ç¤ºçŠ¶æ€
    function showStatus(message, type = 'loading') {
      status.textContent = message;
      status.className = `status ${type}`;
    }

    // åˆ›å»ºæˆ–è·å–è½¬æ¢å™¨ï¼ˆè‡ªåŠ¨åŠ è½½é…ç½®å’Œå­—å…¸ï¼ï¼‰
    async function getConverter(from, to) {
      const key = `${from}-${to}`;

      if (converters[key]) {
        return converters[key];
      }

      showStatus(`ğŸ”„ é¦–æ¬¡ä½¿ç”¨ã€Œ${from} â†’ ${to}ã€è½¬æ¢ï¼Œæ­£åœ¨ä» CDN åŠ è½½é…ç½®å’Œå­—å…¸...`, 'loading');

      try {
        // ä»æœ¬åœ° dist å¯¼å…¥ï¼ˆæ¨¡æ‹Ÿ CDNï¼‰
        // å®é™…ä½¿ç”¨æ—¶æ›¿æ¢ä¸ºï¼š
        // const { default: OpenCC } = await import("https://cdn.jsdelivr.net/npm/opencc-wasm.4.0/dist/esm/index.js");
        const { default: OpenCC } = await import('../dist/esm/index.js');

        // åˆ›å»ºè½¬æ¢å™¨ - æ‰€æœ‰é…ç½®å’Œå­—å…¸éƒ½ä¼šè‡ªåŠ¨ä» CDN ä¸‹è½½ï¼
        const converter = OpenCC.Converter({ from, to });

        converters[key] = converter;
        showStatus(`âœ… è½¬æ¢å™¨ã€Œ${from} â†’ ${to}ã€å‡†å¤‡å®Œæ¯•ï¼ï¼ˆé…ç½®å’Œå­—å…¸å·²ç¼“å­˜ï¼‰`, 'success');

        return converter;
      } catch (err) {
        showStatus(`âŒ åŠ è½½å¤±è´¥: ${err.message}`, 'error');
        throw err;
      }
    }

    // æ‰§è¡Œè½¬æ¢
    async function convert(from, to) {
      if (isLoading) return;

      const text = input.value.trim();
      if (!text) {
        output.textContent = 'è¯·è¾“å…¥æ–‡æœ¬';
        return;
      }

      isLoading = true;
      output.textContent = 'è½¬æ¢ä¸­...';

      try {
        const converter = await getConverter(from, to);
        showStatus(`ğŸ”„ è½¬æ¢ä¸­...`, 'loading');

        const result = await converter(text);

        output.textContent = result;
        showStatus(`âœ… è½¬æ¢å®Œæˆï¼ä½¿ç”¨é…ç½®: ${from} â†’ ${to}`, 'success');
      } catch (err) {
        output.textContent = `è½¬æ¢å¤±è´¥: ${err.message}`;
        showStatus(`âŒ è½¬æ¢å¤±è´¥: ${err.message}`, 'error');
        console.error(err);
      } finally {
        isLoading = false;
      }
    }

    // ç»‘å®šæŒ‰é’®äº‹ä»¶
    document.getElementById('btnSimp2Trad').onclick = () => convert('cn', 't');
    document.getElementById('btnSimp2TW').onclick = () => convert('cn', 'tw');
    document.getElementById('btnSimp2HK').onclick = () => convert('cn', 'hk');
    document.getElementById('btnSimp2TWP').onclick = () => convert('cn', 'twp');
    document.getElementById('btnTrad2Simp').onclick = () => convert('t', 'cn');
    document.getElementById('btnTW2Simp').onclick = () => convert('tw', 'cn');
    document.getElementById('btnHK2Simp').onclick = () => convert('hk', 'cn');

    showStatus('âœ¨ å‡†å¤‡å°±ç»ªï¼é€‰æ‹©è½¬æ¢ç±»å‹å¼€å§‹ä½¿ç”¨', 'success');
  </script>
</body>
</html>
